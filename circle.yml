machine:
  node:
    version: 8.9.1

dependencies:
  override:
    - yarn
    # - if [ ! -f ~/.meteor/meteor ]; then curl https://install.meteor.com | /bin/sh; fi
    - curl https://install.meteor.com | /bin/sh
    # - touch ~/.meteor/packages/meteor-tool/1\.4\.3_1
    - npm install
    # if any project packages were updated, this will download and install them
    - meteor list
  cache_directories:
    # - "~/paratii-mediaplayer/node_modules"
test:
  override:
    - yarn lint
    - yarn run build
deployment:
  staging:
    tag: /v[0-9]+(\.[0-9]+)*/
    commands:
      - yarn publish --tag dev
  release:
    tag: /release-v[0-9]+(\.[0-9]+)*/
    commands:
      - bash ./scripts/release-prod.sh

notify:
  webhooks:
    # A list of hook hashes, containing the url field
    # gitter hook
    - url: https://webhooks.gitter.im/e/9facb9efda66adc53234
